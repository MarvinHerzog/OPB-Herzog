$(document).ready(function(){function e(e,r,l,d,o,c,u){t(e,c),delayAjax=0,r>2&&(delayAjax=500);var f=e-1,p=parseInt(e);u||(p++,f++),!c&&u&&(p=parseInt(e)+1),2>e&&(f=0),0!=o&&a();for(var h=p;r>h;h++)s.slick("slickRemove",!1);b=!0,0!=o&&(u&&0==e||setTimeout(function(){i(d,300),void 0==l&&(l=$(".slick-active:last .clicked").text()),n(l,d)},delayAjax))}function t(e,t){var a=$(".category-breadcrumbs li");t?a.eq(e).nextAll().remove().end().remove():(a.eq(e).nextAll().remove(),0==e&&a.first().find("a").contents().unwrap())}function a(e){s.slick("slickGoTo",e)}function i(e,t){t="undefined"!=typeof t?t:!1;var a=d.replace("{categoryId}",e),i=o.clone();$.ajax({url:a,dataType:"json",success:function(e){$.each(e,function(e,t){var a=t.kategorija_id,r=t.opis,n=t.has_child,l=t.is_premium;1==l&&u&&(r+="*"),i.find("a:first").clone(!0).text(r).removeClass("hidden").attr("data-id",a).attr("data-premium",l).attr("data-children",n).appendTo(i.find(".list-group")),0!=n&&i.find("a:last").append('<span class="glyphicon glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span>'),t.redirect&&null!==t.redirect&&i.find("a:last").attr("href",t.redirect)}),i.find("a:first").remove(),s.slick("slickAdd",i.html()),delayNext=0,t&&(delayNext=t),setTimeout(function(){s.slick("slickNext")},delayNext)},error:function(e){}})}function r(){g.addClass("hidden"),m.addClass("hidden"),v.addClass("hidden"),k.addClass("hidden")}function n(e,t){$(".category-breadcrumbs li:first").clone().text(e).attr("data-level",f).attr("data-id",t).attr("data-title",e).appendTo(".category-breadcrumbs"),$(".category-breadcrumbs li").length>1&&$(".category-breadcrumbs li:last").prev().contents().wrap('<a href="#"></a>')}function l(e){s.animate({height:e},200)}var s=$("#categories"),d=getCategoriesApi,o=$(".list-group-template"),c=$(".submit-category-template"),u=0==$("#normalUser").length?!1:!0,f=1,p=1031,h=!1,g=$(".success"),m=$(".info"),v=$(".warning"),k=$(".danger"),b=!1;r(),s.on("init",function(e){i(0)}),s.on("afterChange",function(e,t,a,i){var r=0;$.each($(".slick-slide:gt(-4)"),function(e,t){var a=$(this);a.height()>r&&(r=a.height())}),l(r)}),$(window).width()>680&&s.slick({infinite:!1,slidesToShow:3,slidesToScroll:1,adaptiveHeight:!0,waitForAnimate:!0,centerMode:!1,dots:!1,arrows:!1,draggable:!1,infinite:!1,swipe:!1,swipeToSlide:!1,touchMove:!1}),$(window).width()<680&&(h=!0,s.slick({infinite:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,waitForAnimate:!0,centerMode:!1,dots:!1,arrows:!1,draggable:!1,infinite:!1,swipe:!1,swipeToSlide:!1,touchMove:!1})),$("body").on("click",".category-breadcrumbs li a",function(t){t.preventDefault();var a=$(this).parent("li"),i=a.index(),r=!0,n=$(".slick-slide").length,d=a.attr("data-title"),o=a.attr("data-id");-1==i&&(i=0),0==i&&(r=!1,$(".list-group-item").removeClass("clicked")),(0==i||1==i||2==i)&&l(p),e(i,n,d,o,1,r,!0),setTimeout(function(){s.slick("slickNext")},delayAjax+1e3),b=!1}),$("body").on("click",'a.list-group-item[href="#"]',function(t){t.preventDefault();var a=$(this),r=a.attr("data-id"),d=a.attr("data-children"),o=a.attr("data-premium"),g=a.text();if(b=!1,a.siblings().removeClass("clicked"),a.addClass("clicked"),0!=a.parents(".slick-slide").nextAll().length){var m=parseInt(a.closest(".slick-slide").index()),v=$(".slick-slide").length;e(m,v,g,r,d,!1,!1),b=!0,(0==m||1==m||2==m)&&l(p)}if(0==d){var k=c.clone();k.find(".success").removeClass("hidden").addClass("margin").text("Uspešno ste izbrali končno kategorijo."),1==o&&u&&k.find(".info").removeClass("hidden").addClass("margin").text("Izbrali ste plačljivo kategorijo."),$(".category-breadcrumbs li:first").clone().appendTo(".category-breadcrumbs"),$(".category-breadcrumbs li:last a").text(g).contents().unwrap().parent().attr("data-level",f).attr("data-id",r).attr("data-title",g),k.find("#selectedCategory").val(r),s.slick("slickAdd",k.html()),s.slick("slickNext")}else b||(i(r),n(g,r),b=!1);h?$("html, body").animate({scrollTop:$("#top_vsebina").offset().top-25},500):$("html, body").animate({scrollTop:0},500),b=!1})});